% status: 10
% chapter: TBD

\title{GraphQL Web APIs}

\author{Averill Cate, Jr}
\orcid{1234-5678-9012}
\affiliation{%
  \institution{The University of Indiana}
  \streetaddress{}
  \city{Bloomington} 
  \state{Indiana} 
  \postcode{47408}
}
\email{acate@iu.edu}

\author{Gregor von Laszewski}
\affiliation{%
  \institution{Indiana University}
  \streetaddress{Smith Research Center}
  \city{Bloomington} 
  \state{IN} 
  \postcode{47408}
  \country{USA}}
\email{laszewski@gmail.com}

% The default list of authors is too long for headers}
\renewcommand{\shortauthors}{G. v. Laszewski}

\begin{abstract}
This project is for Advanced Cloud Computing, Indiana University Spring 
Semester 2018.  Through this project, we will demonstrate the use of 
GraphQL\cite{hid505FacebookGraphQL2018} and cloud computing services as a 
means for constructing and delivering web services.  The project will rely on 
The Santa Rita  Experimental Range (SRER) website and data sets maintained by 
the Univeristy of Arizona and second, related web site, the Walnut Gulch 
Experimental Watershed (WGEW) Online Data Access, maintained by the United 
States Department of Agriculure's, Agriculure Research Service (ARS).  
Neither of these existing sites provide modernized data services, yet both 
sites provide potentiall valuable data to the research community.

\end{abstract}

\keywords{hid-sp18-505, GraphQL, Web, Services}

\maketitle

\section{Introduction}
What is GraphQL?  GraphQL is a query language for web application programer 
interfaces (APIs)\cite{hid505FacebookGraphQL2018}.  There have been been 
many other tools and methods used to develop APIs in the past.  Some of those 
older tools are XML and SOAP, JSON and REST, plain old text or comma separated 
files.  What makes GraphQL so different?  First, as the name implies, GraphQL, 
is a query language.  This is different compared to SOAP/XML and Swagger/REST 
in that those tools are a combination of data format and transport protocol.  

Typically, SOAP/XML and Swagger/REST APIs are structured so that the API user 
needs to review the specifications for interacting with the API.  For example, 
what functions or endpoints are available?  What are the parameters for those 
functions and what data types apply to each parameter?  GraphQL is different 
in that it provides a mechanism where an API becomes a domain specific language 
(DSL).  This means that API consumers can focus on developing transactions with 
the API based on the data domain of the API.  For example, a GraphQL API for 
stock data would allow API users to format queries something like the 
following: 
\begin{verbatim}
{
   all_stocks {
     symbol, price, date
}
\end{verbatim}
In this example we see a query request to a GraphQL API that is asking for all 
stock data with respective symbol, price, an date.  Alternatively, a REST based 
query might look like the following:
\begin{verbatim}
http://server.host.com/api/v1/allstocks
\end{verbatim}
In the REST based request we see information related to where the data are being
requested from, the protocol used to make the request, the API version and finally,
what the request is really after, all stock data.  The latter could be 
considered more  understandble to programmers or even to someone who is 
technically a advanced web users, but compared to the REST request, the GraphQL 
based request has a format more closely resembling the data intself and is less 
concered with how the data are requested.

A useful way to demonstrate the uses of GraphQL would be to apply GraphQL to the 
development of a real-world API that will transform existing web-based data sources 
created and maintained at United Stated Deparment of Agriculture web site and 
the University of Arizona.  The first data resource is the Santa Rita Experimental 
which is an experimental range currently maintained by the University of Arizona.  
The experimental range was the first of its kind and was established in 
1902\cite{SrerWebSite2018}.  The SRER website, in its current state is not 
structured to deliver data as a service.  The second data source is the Walnut 
Gulch Experimental Watershed is also an outdoor research facility located in 
southestern Arizona\cite{WgewWebSite2018}.  Like the SRER site, the WGEW 
preicpitation and runoff data site is not structured to delivered as services.


\textbf{General outline of the proceedures for developing the API}
\begin{enumerate}
\item Web scraping existing data source to download, parse and clean existing data.
\item Load the data into a database.  
\item Develop a small web application to provide two web services.  The two 
services will deliver the same data.  However, one of the services will use 
GraphQL to deliver data and the other will use REST\cite{hid505swaggerio2018} hid505FacebookGraphQL2018
to deliver its data. 
\item Develop a simple load testing tool that will be used to determine 
performance metrics for both services and compare the results of the load tests.
\item Time permitting, create a simple Amazon Lambda service that will compute 
some metric related to the preciption/runoff data.  The purpose is to 
demonstrate how cloud services can be used to off-load costs and dependencies 
on a distributed system like the one proposed in this project.
\item Time permitting, develop a 3-node Raspberry Pi cluster to host the 
application.  The purpose of this, is to demonstrate how a system like this 
one can be hosted and deployed on hardware infrastructure that is cheap and 
relatively simple to maintain.
\end{enumerate}

\section{GraphQL}
Content on GraphQL

\section{REST and SWAGGER}
Content on REST/Swagger here.

\section{Data Acquistion}
Describe how the SRER data were scraped, parsed, cleaned and stored.

Describe how the WGEW data were scraped, parsed, cleaned and stored.

\section{Web API Application}
Describe the tools used and how the web api application was developed.
I have done most of this work already.

The source code is currently hosted at: https://github.com/acatejr/eapi.git

\section{Service Comparison}
GraphQL and REST Swagger Comparison
Describe the tools used and the development of the load testing tools.  
Also, describe the results.  Table summary, etc.

\section{Amazon Lambda}
If there is time describe and implement the Amazon Lambda that the web 
API/application can use.

\section{Raspberry Pi Cluster}
If there is time, describe and develop a three-node Raspberry Pi cluster and 
deploy the web api application to that cluser.

\section{Conclusion}
The conclusion will go here.

\begin{acks}
The authors would like to thank Dr.~Gregor~von~Laszewski for his support 
and suggestions to write this paper.
\end{acks}

\bibliographystyle{ACM-Reference-Format}
\bibliography{report} 
